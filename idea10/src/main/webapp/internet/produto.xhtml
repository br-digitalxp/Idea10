<!DOCTYPE html>
<ui:composition template="template.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:p="http://primefaces.org/ui">
	<ui:define name="content">
		<h:form>
			<p:outputPanel style="display:block" styleClass="container produto">
				<p:outputPanel style="display:block" styleClass="row">
					<p:outputPanel style="display:block;margin-top:30px;" styleClass="col-md-12">
						<p class="categoria-title">
							<p:outputLabel value="#{cadastrarOrdemServico.imagem.categoria.nomeCategria}" />
						</p>
						<h1 class="title">
							<p:outputLabel value="#{cadastrarOrdemServico.imagem.titulo}" />
						</h1>
					</p:outputPanel>
					<p:outputPanel style="display:block" styleClass="col-md-6">
						<p:outputPanel style="display:block" styleClass="produto-img">
							<img src="#{cadastrarOrdemServico.imagem.imagem.caminhoImagemComp}" id="imagemLoupe" alt="#{cadastrarOrdemServico.imagem.titulo}" title="#{cadastrarOrdemServico.imagem.titulo}" />
						</p:outputPanel>
						<script>
							$('#imagemLoupe').loupe();
						</script>
						<p:outputPanel style="display:block" styleClass="produto-descricao">
							<h3>Sobre esta imagem:</h3>
							<p>
								<p:outputLabel value="#{cadastrarOrdemServico.imagem.descricao}" />
							</p>
							<h3>Materiais e Aplicações</h3>
							<p>Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy.
								Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).</p>
						</p:outputPanel>
					</p:outputPanel>
					<p:outputPanel style="display:block" styleClass="col-md-6">
						<p:outputPanel style="display:block" styleClass="produto-material">
							<p:outputPanel style="display:block" styleClass="etapa">
								<span class="etp">1</span>
								<h3>
									<strong>PASSO 1 :</strong> SELECIONE O MATERIAL
								</h3>
							</p:outputPanel>
							<p:outputPanel style="display:block" styleClass="produto-list-item">
								<p:selectOneMenu id="inputText-categoria" style="width:350px;" value="#{cadastrarOrdemServico.substratoModel.codigo}">
									<f:selectItem noSelectionOption="true"></f:selectItem>
									<f:selectItems value="#{cadastrarOrdemServico.listaSubstrato}" var="substrato" itemLabel="#{substrato.material}" itemValue="#{substrato}" />
									<p:ajax listener="#{cadastrarOrdemServico.buscarTamanhoSubstrato}" update="panel-2,panel-3,panel-4,panel-5,panel-6" event="change" />
								</p:selectOneMenu>
							</p:outputPanel>
						</p:outputPanel>
						<p:outputPanel style="display:block" id="panel-2" styleClass="produto-formato">
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.substratoModel.codigo != null}" styleClass="etapa">
								<span class="etp">2</span>
								<h3>
									<strong>PASSO 2 :</strong> SELECIONE O FORMATO
								</h3>
							</p:outputPanel>
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.substratoModel.codigo != null}" styleClass="produto-list-item">
								<p:selectOneMenu id="inputText-tamanho" style="width:350px;" value="#{cadastrarOrdemServico.tamanho.codigo}">
									<f:selectItem noSelectionOption="true"></f:selectItem>
									<f:selectItems value="#{cadastrarOrdemServico.listaTamanhoSubstrato}" var="tamanho" itemLabel="#{substrato.valorX} cm X #{substrato.valorY} cm" itemValue="tamanho" />
									<p:ajax listener="#{cadastrarOrdemServico.resetQuantidade}" update="panel-3,panel-4,panel-5,panel-6" event="change" />
								</p:selectOneMenu>
							</p:outputPanel>
						</p:outputPanel>
						<p:outputPanel style="display:block; margin-top:30px;" id="panel-3" styleClass="produto-formato">
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.tamanho.codigo != null}"  styleClass="etapa">
								<span class="etp">3</span>
								<h3>
									<strong>PASSO 3 :</strong> QUANTIDADE
								</h3>
							</p:outputPanel>
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.tamanho.codigo != null}"  styleClass="produto-list-item">
								<h:panelGrid columns="2">
									<h:outputLabel value="M²: " />
									<p:inputText value="#{cadastrarOrdemServico.quantidade}" id="quantidade" size="3">
										<p:ajax listener="#{cadastrarOrdemServico.calcularValor}" update="panel-4,panel-5,panel-6" event="change" />
									</p:inputText>
								</h:panelGrid>
							</p:outputPanel>
						</p:outputPanel>
						<p:outputPanel style="display:block; margin-top:30px;" id="panel-4" styleClass="produto-formato">
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.quantidade != null}"  styleClass="etapa">
								<span class="etp">4</span>
								<h3>
									<strong>PASSO 4 :</strong> VALOR
								</h3>
							</p:outputPanel>
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.quantidade != null}"  styleClass="produto-list-item">
								<h:panelGrid columns="2">
									<h:outputLabel value="Valor: " />
									<h:outputText value="#{cadastrarOrdemServico.valor}" id="valorFinal" >
										<f:convertNumber currencyCode="BRL" type="currency" />
									</h:outputText>
								</h:panelGrid>
							</p:outputPanel>
						</p:outputPanel>
						<p:outputPanel style="display:block; margin-top:30px;" id="panel-5" styleClass="produto-formato">
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.quantidade != null}" styleClass="etapa">
								<span class="etp">5</span>
								<h3>
									<strong>PASSO 5 :</strong> DADOS DO CLIENTE
								</h3>
							</p:outputPanel>
							<p:outputPanel style="display:block" rendered="#{cadastrarOrdemServico.quantidade != null}" styleClass="produto-list-item">
								<h:panelGrid columns="2">
									<h:outputLabel value="Nome Completo:" />
									<p:inputText value="#{cadastrarOrdemServico.cliente.nome}" />
									<h:outputLabel />
									<h:outputLabel />
									<h:outputLabel value="CPF:" />
									<p:inputMask id="CPF"
												 value="#{cadastrarOrdemServico.cliente.cpf}"
							                     mask="999.999.999-99"
							                     required="true"
							                     requiredMessage="CPF inválido"
							                     maxlength="11">
							            <!-- <f:convertNumber integerOnly="true"/> -->
							        </p:inputMask>
									<!-- <h:inputText value="#{cadastrarOrdemServico.cliente.cpf}" maxlength="14" /> -->
									<h:outputLabel />
									<h:outputLabel />
									<h:outputLabel value="E-mail:" />
									<p:inputText value="#{cadastrarOrdemServico.cliente.email}" />
									<h:outputLabel />
									<h:outputLabel />
									<h:outputLabel value="Endereço:" />
									<p:inputText value="#{cadastrarOrdemServico.cliente.endereco}" />
									<h:outputLabel />
									<h:outputLabel />
									<h:outputLabel value="Telefone:" />
									<p:inputMask id="telefone"
							                     mask="(99)99999-999?9"
							                     required="true"
							                     requiredMessage="Telefone inválido"
							                     value="#{cadastrarOrdemServico.cliente.telefone}"
							                     maxlength="11">
							            <!-- <f:convertNumber integerOnly="true"/> -->
							            <p:ajax update="panel-6" event="change" />
							        </p:inputMask>
									<!-- <h:inputText value="#{cadastrarOrdemServico.cliente.telefone}" maxlength="15" >
										<p:ajax update="panel-6" event="change" />
									</h:inputText> -->
								</h:panelGrid>
							</p:outputPanel>
							<p:outputPanel style="display:block;margin-top:30px;" id="panel-6" styleClass="col-md-3 catalogo-completo">
								<p:commandButton value="Cadastrar Ordem de Serviço" rendered="#{cadastrarOrdemServico.cliente.telefone != null}" id="commandButton-cadastrar-ordem-servico" styleClass="btn btn-default" actionListener="#{cadastrarOrdemServico.cadastraOrdemServico}" onsuccess="PF('dlg').show();" type="submit" />
							</p:outputPanel>
							<p:dialog header="Sucesso" widgetVar="dlg" modal="true" id="sucessoDlg" height="100">
								<p:outputPanel style="display:block; margin-top:30px;" styleClass="produto-formato">
									<p:outputPanel style="display:block" styleClass="etapa">
										<h3>
											<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
										</h3>
									</p:outputPanel>
								</p:outputPanel>							    
							</p:dialog>  
						</p:outputPanel>
					</p:outputPanel>
				</p:outputPanel>
			</p:outputPanel>
		</h:form>
	</ui:define>
</ui:composition>